
\section{Process of discovering transiting exoplanets}
Observing a transit event is one thing, finding the transit signal in a light curve is another. This task is simple if the existence of a planet is known beforehand, but this is not true in our case, so we need to search for signals. Once potential signals have been detected, the process continues, as the nature of each signal needs to be validated. The steps from raw light curves to the discovery of new exoplanets are described in the following subsection, after which follows a detailed description of the challenges that need to be overcome in the process.

\subsection{Detection, identification and characterization}
\label{sec:disc_process}

Apart from preprocessing the light curves, the detection of transit signals is the first step in the process of discovering transiting exoplanets. In literature, however, some ambiguity exists between the detection step and the step that follows detection. We follow the categories used by  \cite{jaratransiting} (as well as other works) and emphasize the difference between detection and identification.

In the detection step, which is the focus of this thesis, transit signals are blindly searched for without prior knowledge of their timing, shape or existence in general. Epoch $t_0$ and period $P$ (if applicable) and possibly other parameters of potential signals are determined and passed to the next step.

Identification, or vetting, is the processes of ruling out clear false positives from the returned detections. Often this is a binary classification task, where the isolated transit signal is classified as planet candidate or false positive. The main difference with the detection step is that during identification, no new potential signals are being searched for. Admittedly, one could apply an identification model to every part of a given light curve to search for new signals, although in most cases this is not what the algorithm was designed for. Furthermore, this would likely results in an unnecessarily inefficient detection algorithm.

Once a potential signal has passed the identification step, this still does not mean we have found a new planet. According to \cite{akeson2013nasa}, a candidate exoplanet must meet the following criteria to be included in the Exoplanet Archive: (1) it has a (minimum) mass estimate of no larger that 30 Jupiter masses, (2) its properties are described in the peer-reviewed literature, and (3) sufficient follow-up observations and validation have been undertaken to deem the possibility of a false positive as unlikely. For example, after the transit method is applied, one could attempt to confirm and characterize the system further using radial velocity measurements, or more accurate modelling techniques.


\subsection{Challenges}
\label{sec:challenges}

Although a transit signal is clearly defined, it is often a difficult task to detect or study them. This is mostly because the signals are usually weak and the background varies at greater amplitudes than the signal. These and other challenges are explained in detail in the following subsections.

\subsubsection{Small chances and weak signals}

For the transit method to work, a planetary system is required to be oriented edge-on (i.e. with an inclination $i \approx 90^\circ$). If the system is seen face-on ($i \approx 0^\circ$), any orbiting planet would not transit its host star with respect to our line of sight. However, no mechanism restricts planetary systems from being oriented randomly, so even if all stars would have orbiting planets, a large portion would go undetected. The chance of a planet transiting also depends on the distance from its host star. The farther away from the stars, the smaller the chance of a planet transiting.  If one were to observe our Sun from far away, the chance that Earth would transit the Sun for a random orientation of our solar system is only 0.47\%. Furthermore, even if it would transit, its 13-hour signal would only repeat once per year and leave a dip in the Sun's observed brightness of only about 80 ppm, or 0.0008\%. Hence, the transit method is biased towards detecting short-period Jupiter sized planets, as these cause transit signals that are more frequent and more profound. Nevertheless, the goal is also to detect Earth-like planets, which are small and have larger distances from their host star. For this to succeed, the background flux needs to be accurately modeled in order to disentangle it from the transit signals.

\subsubsection{Stellar activity}

Part of the reason why the background flux in a light curve is not constant is due to stellar activity. Stars, like our Sun, are not uniform spheres that emit a constant amount of photons at all times. First of all, starspots could be present. These visually dark regions on the stellar surface are relatively low in temperature, and thus decrease the flux. On the other hand, higher temperature regions can increase the flux. This alone would be no problem if the spots would always be present. However, starspots come and go with a lifetime depending on their size. Moreover, the star itself can be rotating, with the result that any spots that are present come in and out of sight as it rotates. This effect is called rotation modulation. 

To complicate things further, a star's surface is dominated by cell-like structures called granules, which are caused of energy transport below the stellar surface. As hot and thus brighter plasma rises, cooler and dimmer plasma descents, leaving the stellar surface as a constantly changing with a fluctuating brightness. These effects can closely mimic transit signals in a light curve, and thus often lead to false positive transit detections. Other stellar activity includes for example, stellar oscillations and sudden outbursts of energy, or flares.

In summary, a light curve may exhibit quasi-periodic patterns that are caused by complex mechanisms at local and global scales on and below the stellar surface. \red{[TODO: compare amplitudes of fluctuation with transits, see \cite{barros2020improving}]}.

\subsubsection{Instrumental and photon noise}

No instrument is perfect, neither is the setup of the observations. For ground-based observatories, weather could play a role or measurements might be affected by stray light from nearby cities. In this thesis, we assume all data to be coming from space-based observatories. These are not affected by the obstacles mentioned above, but still have imperfections. For example, temperature changes in the spacecraft can alter the pointing of the telescope, resulting in jumps or drifts in the observed flux from stars. As the telescope typically observes thousands of targets at the same time, this affects all the thousands of corresponding light curves, though potentially in slightly different ways. And although stray light from cities plays less of a role in space, stray light from the moon may still negatively influence the quality of measurements.

Poor quality data is often filtered out, leaving gaps in the resulting light curves. This could pose a problem for certain data processing algorithms. Larger gaps could result from when the spacecraft downlinks data back to Earth. During this process, the telescope might not gather new data, causing the light curves to have gaps of several hours to a few days.

Another source of noise, although not due to instrument imperfections, is photon noise. This type of noise originates from the arrival of different amounts of photons at the detector between different observations. The number of arrivals per observation can be modeled as a Poisson distribution, which for a large number of photons approximates a Gaussian distribution. The photon noise can thus often be seen as the time independent white noise in the data.

\subsubsection{Astrophysical false positives}

Sometimes, a false positive detection is not due to stellar or spacecraft induced noise, but due to other phenomena. For example, a large portion of the stars exists in a binary configuration. In case an eclipsing binary (EB) system is seen edge-on from Earth, the stars transit each other just like an exoplanet would transit its host star. Generally, the corresponding transit signals will be larger than for exoplanets, but if the stars' orbital plane is slanted and they have grazing transits, the signals can become more similar to exoplanet transits. 

More similar to exoplanet transit signals can be due to an EB system lurking in the background of an observed star. These background EBs (BEBs) can be much farther away than the star under consideration, but contribute to the star's light curve. The BEB transit signals will thus also be smaller and could mimic exoplanet transit signals in the light curve of the foreground star.

In the detection step, however, it is not the main goal to discern (B)EBs from exoplanet transit signals. This can well be done in the identification step. Similarly, the detection step could return a signal that is in fact 
caused by a large exocomet or asteroid. Restricting our detection algorithm too much on what kind of signals it is allowed to pick up, may exclude various interesting signals. In many cases, however, it would be of great astrophysical value to study those signals.

\subsubsection{Transit signal shapes}

The basic shape of a transit signal is determined by a set of parameters. These parameters include, among others: the orbital period of the planet, its radius relative to its host star, the distance from its host star, the inclination of its orbital plane and the eccentricity of its orbit. Each of these affects the transit shape differently, e.g. the inclination determines if the signal will be U-shaped or V-shaped, and the eccentricity has an effect on the duration of a transit. It is not the task, however, of the transit detection algorithm to determine all these parameters. Nonetheless, one needs to ensure that the algorithm is robust against differences in shapes between transit signals. Some other sources of differences in transit shapes are discussed below (excluding more rare phenomena such as gravity darkening effects).

\paragraph{Stellar limb darkening}

Although most patterns caused background stellar activity are simply overlayed with the transit signal, some phenomena caused by the star only have an effect in combination with an exoplanet transit. One of these phenomena is stellar limb darkening, which only shows its effect on a light curve when a planet moves in front of the star. The deeper into a star's interior, the hotter it gets. As an exoplanet passes in front of a star, it first passes its edge, or limb. From our perspective, the limb region of a star is less deep than the central part of the stellar disk. For this reason, the stellar limb appears dimmer than the central part. As the exoplanet proceeds, it will thus block an increasing fraction of the emitted light, until it passes the center of stellar disk, after which the fraction of blocked starlight decreases again. This effect will cause the transit depth to not be constant, but instead be slightly changing over time with a maximum depth at mid-transit time. The limb darkening effect is also dependent on the wavelength at which is observed. 

\paragraph{Occulted starspots}

Although starspots by themselves can leave their imprint on a light curve, and thus on the background of a transit signal, in some cases the combination of starspots and transits lead to interesting changes in transit signal shapes. In case a starspot is occulted by the transiting exoplanet, the fraction of blocked starlight is relatively low, so the transit signal will have a positive bump for some duration, meaning the transit depth at that point is smaller than one would expect. In this thesis we do not consider occulted starspots in our data or evaluation, although the presented detection method is would still be applicable in this case, as distorted transit signals could be learned by the RNN prior to search.

\subsubsection{Data volume}

Provided the data is of good quality, more data is often preferred. Especially machine learning algorithms are known to work well in the large-data regime. However, it could be challenging to work with the large amounts of data the exoplanet-hunting missions produce. For example, assume we have 35 sectors ($\sim$2.5 years) of TESS data, each incorporating the light curves of 20.000 stars. Assuming a 2-minute cadence, each light curve consists of about 20.000 measurements. If we only consider the flux values, we have about 14 billion data points, or 112 GB worth of data. One could even choose to include additional information such as measurement errors, or information about the pointing of the telescope at each time step, which further increase the data volume.